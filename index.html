<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>関西医科大学ラグビー部OB会</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- パスワードゲート（24時間有効） -->
<div id="gate" class="gate">
  <div class="gate__card">
    <h2>会員専用ページ</h2>
    <p class="muted">
      このページはOB会会員向けです。<br>
      合言葉（パスワード）を入力してください。<br>
      ※ 1日1回の入力で閲覧できます。
    </p>

    <div class="gate__row">
      <input id="pw" type="password" placeholder="パスワード">
      <button id="pwBtn" class="btn btn--primary">入室</button>
    </div>
    <p id="pwErr" class="error"></p>
  </div>
</div>

<header class="topbar">
  <div class="wrap topbar__inner">
    <div class="brand">
      <div class="brand__badge">KMU</div>
      <div class="brand__text">
        <div class="brand__title">関西医科大学ラグビー部OB会</div>
        <div class="brand__subtitle">Kansai Medical University Rugby Alumni</div>
      </div>
    </div>

    <nav class="nav">
      <a href="accounting.html" class="nav__link nav__link--highlight">
        年次会計報告
      </a>
      <a href="#contact" class="nav__link">連絡先登録</a>
      <a href="#news" class="nav__link">お知らせ</a>
      <a href="#schedule" class="nav__link">予定表</a>
      <a href="magazine.html" class="nav__link">部誌</a>
    </nav>
  </div>
</header>

<main class="wrap">

  <!-- ヒーロー（前の“かっこいい”やつ） -->
  <section class="hero">
    <div class="hero__inner">
      <h1>関西医科大学ラグビー部OB会</h1>
      <p>
        OB会からのご連絡、活動予定、部誌、会計報告をまとめた公式サイトです。
      </p>

      <div class="hero__cta">
        <a class="btn btn--primary" href="#contact">連絡先登録</a>
        <a class="btn" href="magazine.html">部誌を見る</a>
        <a class="btn" href="accounting.html">年次会計報告</a>
      </div>
    </div>
  </section>

  <!-- 連絡先 -->
  <section id="contact" class="section">
    <h2>連絡先の確認・登録</h2>
    <p class="muted">
      OB会からのご案内を円滑に行うため、連絡先情報の確認・更新をお願いします。
    </p>
    <a class="btn btn--primary"
       target="_blank"
       href="https://docs.google.com/forms/d/e/1FAIpQLSeCmVJEP1rfuQdIvcYm5URyk_26z0yZFeivVwO6i3mG4ubHJA/viewform?usp=publish-editor">
      連絡先登録フォームを開く
    </a>
  </section>

  <!-- お知らせ -->
  <section id="news" class="section">
    <h2>お知らせ</h2>
    <div class="embed">
      <iframe
        src="https://docs.google.com/spreadsheets/d/e/2PACX-1vT2CNdb3UMpKUIb5k-WElzt-iv8sBftYOga0gkMO6jgciZNJNfLwVee0T2u8MajPtfjxQ22ESKh45Xi/pubhtml?gid=0&single=true">
      </iframe>
    </div>
  </section>

  <!-- 予定表 -->
  <section id="schedule" class="section">
    <h2>活動予定</h2>
    <div class="embed embed--calendar">
      <iframe
        src="https://calendar.google.com/calendar/embed?src=kmu.rugby.ob%40gmail.com&ctz=Asia%2FTokyo">
      </iframe>
    </div>
  </section>

</main>

<footer class="footer">
  <div class="muted small">
    関西医科大学ラグビー部OB会
  </div>
</footer>

<script>
  // ===== パスワード（24時間）=====
  const SITE_PASSWORD = "CHANGE_ME"; // ←実際のパスワード
  const KEY = "kmu_ob_gate_until";
  const DAY = 24 * 60 * 60 * 1000;

  const gate = document.getElementById("gate");
  const pw = document.getElementById("pw");
  const btn = document.getElementById("pwBtn");
  const err = document.getElementById("pwErr");

  function allowed() {
    return Number(localStorage.getItem(KEY)) > Date.now();
  }
  function open() { gate.style.display = "none"; }
  function lock() { gate.style.display = "flex"; }

  if (allowed()) open(); else lock();

  btn.onclick = () => {
    if (pw.value === SITE_PASSWORD) {
      localStorage.setItem(KEY, Date.now() + DAY);
      open();
    } else {
      err.textContent = "パスワードが違います。";
      pw.value = "";
    }
  };
</script>

</body>
</html>
